import { percentageFormatter } from "./index";

describe("percentageFormatter", () => {
  test.each([
    // en-GB
    [undefined, "en-GB", "---"],
    [null, "en-GB", "---"],
    ["notANumber", "en-GB", "---"],
    [NaN, "en-GB", "---"],
    [0.34, "en-GB", "0.34"],
    [5.0, "en-GB", "5"],
    [5.5, "en-GB", "5.5"],
    [15, "en-GB", "15"],
    [15.4, "en-GB", "15"],
    [15.5, "en-GB", "16"],
    [94, "en-GB", "94"],
    [94.4, "en-GB", "94"],
    [94.5, "en-GB", "95"],
    [100, "en-GB", "100"],
    [115, "en-GB", "115"],
    [115.4, "en-GB", "115"],
    [115.5, "en-GB", "116"],
    [0.00003, "en-GB", "~0.0000"],
    [-0.34, "en-GB", "-0.34"],
    [-5.0, "en-GB", "-5"],
    [-5.5, "en-GB", "-5.5"],
    [-15, "en-GB", "-15"],
    [-15.4, "en-GB", "-15"],
    [-15.5, "en-GB", "-16"],
    [-94, "en-GB", "-94"],
    [-94.4, "en-GB", "-94"],
    [-94.5, "en-GB", "-95"],
    [-100, "en-GB", "-100"],
    [-115, "en-GB", "-115"],
    [-115.4, "en-GB", "-115"],
    [-115.5, "en-GB", "-116"],
    [-0.00001, "en-GB", "~0.0000"],
    // 'ja' (Japanese)
    [0.34, "ja", "0.34"],
    [5.0, "ja", "5"],
    [5.5, "ja", "5.5"],
    [15, "ja", "15"],
    [15.4, "ja", "15"],
    [15.5, "ja", "16"],
    [94, "ja", "94"],
    [94.4, "ja", "94"],
    [94.5, "ja", "95"],
    [100, "ja", "100"],
    [115, "ja", "115"],
    [115.4, "ja", "115"],
    [115.5, "ja", "116"],
    [-0.34, "ja", "-0.34"],
    [-5.0, "ja", "-5"],
    [-5.5, "ja", "-5.5"],
    [-15, "ja", "-15"],
    [-15.4, "ja", "-15"],
    [-15.5, "ja", "-16"],
    [-94, "ja", "-94"],
    [-94.4, "ja", "-94"],
    [-94.5, "ja", "-95"],
    [-100, "ja", "-100"],
    [-115, "ja", "-115"],
    [-115.4, "ja", "-115"],
    [-115.5, "ja", "-116"],
    // 'ru' (Russian)
    [0.00004, "ru", "~0,0000"],
    [0.34, "ru", "0,34"],
    [5.0, "ru", "5"],
    [5.5, "ru", "5,5"],
    [15, "ru", "15"],
    [15.4, "ru", "15"],
    [15.5, "ru", "16"],
    [94, "ru", "94"],
    [94.4, "ru", "94"],
    [94.5, "ru", "95"],
    [100, "ru", "100"],
    [115, "ru", "115"],
    [115.4, "ru", "115"],
    [115.5, "ru", "116"],
    [-0.34, "ru", "-0,34"],
    [-5.0, "ru", "-5"],
    [-5.5, "ru", "-5,5"],
    [-15, "ru", "-15"],
    [-15.4, "ru", "-15"],
    [-15.5, "ru", "-16"],
    [-94, "ru", "-94"],
    [-94.4, "ru", "-94"],
    [-94.5, "ru", "-95"],
    [-100, "ru", "-100"],
    [-115, "ru", "-115"],
    [-115.4, "ru", "-115"],
    [-115.5, "ru", "-116"],
  ])(
    "given value=%p, navigator.language=%p - should return expected output",
    (value, mockedNavigatorLanguage, expected) => {
      // Call the formatter function
      const retValue = percentageFormatter(value as number, {
        locale: mockedNavigatorLanguage,
        smallValueLimit: 0.0001,
      });

      // Assert the result
      expect(retValue).toEqual(expected);
    },
  );
});
